Creating shadow database...
Initialising schema...
Seeding globals from roles.sql...
Applying migration 20240101000000_create_plans_table.sql...
Applying migration 20240101000001_create_rewards_table.sql...
Applying migration 20240101000002_create_user_profiles_table.sql...
Applying migration 20240101000003_create_daily_checkins_table.sql...
Applying migration 20240101000004_create_gamification_table.sql...
Applying migration 20240916000001_enhance_gamification_system.sql...
NOTICE (42701): column "status" of relation "redemption_history" already exists, skipping
NOTICE (42701): column "metadata" of relation "redemption_history" already exists, skipping
WARNING (25P01): there is no transaction in progress
Applying migration 20250831170636_create_whatsapp_messages.sql...
Applying migration 20250904000000_create_auth_user_trigger.sql...
NOTICE (00000): Skipping auth.users trigger DDL (owner: supabase_auth_admin, current_user: postgres)
Applying migration 20250904000001_fix_user_profiles_foreign_key.sql...
Applying migration 20250904000002_fix_gamification_trigger.sql...
NOTICE (00000): Skipping auth.users trigger DDL for gamification (owner: supabase_auth_admin, current_user: postgres)
NOTICE (00000): function public.create_gamification_for_auth_user() does not exist, skipping
NOTICE (00000): Skipping gamification trigger creation (owner: supabase_auth_admin, current_user: postgres)
Applying migration 20250905000003_update_auth_triggers.sql...
NOTICE (42710): extension "pg_net" already exists, skipping
NOTICE (42710): extension "supabase_vault" already exists, skipping
NOTICE (00000): trigger "on_auth_user_created" for relation "auth.users" does not exist, skipping
ERROR: function public.on_auth_user_created() does not exist (SQLSTATE 42883)
At statement: 4                                                              
-- Create trigger for new auth users                                         
CREATE TRIGGER on_auth_user_created                                          
AFTER INSERT ON auth.users                                                   
FOR EACH ROW                                                                 
EXECUTE FUNCTION public.on_auth_user_created()                               
Try rerunning the command with --debug to troubleshoot the error.
